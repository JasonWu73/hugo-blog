---
author: å´ä»™æ°
authorEmoji: ğŸ§‘ğŸ»â€ğŸ’»
categories:
- JavaScript
tags:
- async
- promise
series:
- å¼‚æ­¥ JavaScript
title: JavaScript æ„å»º Promise
date: 2021-05-30T04:36:08+08:00
description: JS å¯é€šè¿‡ Promise ä¼˜é›…åœ°è§„é¿å›è°ƒåœ°ç‹±ï¼ˆcallback hellï¼‰ã€‚
---

> {{<reprint>}}

{{< param description >}}

## ä½•ä¸º Promise

Promise
: ä¸€ä¸ªåŒ…å«å¼‚æ­¥æ“ä½œç»“æœçš„å ä½ç¬¦å¯¹è±¡ã€‚

Promise çš„ä¼˜ç‚¹ï¼š

- æ— éœ€ä¾èµ–å°†äº‹ä»¶å’Œå›è°ƒä¼ é€’ç»™å¼‚æ­¥å‡½æ•°ï¼Œå°±å¯ä»¥å¤„ç†å¼‚æ­¥ç»“æœ
- å¯ä¸ºä¸€ç³»åˆ—å¼‚æ­¥æ“ä½œæä¾› Promise é“¾å¼è°ƒç”¨ï¼Œä»è€Œé¿å…å›è°ƒåœ°ç‹±ï¼ˆcallback hellï¼‰

Promise ç”Ÿå‘½å‘¨æœŸï¼š

1. Pendingï¼šæ„å»º Promise å¯¹è±¡æ—¶çš„åˆå§‹çŠ¶æ€ï¼Œæ­¤æ—¶å¼‚æ­¥ä»»åŠ¡ä¼šç«‹å³åœ¨åå°è¿è¡Œ
    - `new Promise()`
2. Settledï¼šå¼‚æ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•
    - Fulfilledï¼šå¼‚æ­¥ä»»åŠ¡æ‰§è¡ŒæˆåŠŸï¼Œä¸”ç»“æœå¯ç”¨
        - `then()`
    - Rejectedï¼šå¼‚æ­¥ä»»åŠ¡æ‰§è¡Œå¤±è´¥ï¼Œå³å‘ç”Ÿäº†é”™è¯¯
        - `then()` æˆ– `catch()`

## Promise ä¸èƒ½å°†åŒæ­¥è½¬ä¸ºå¼‚æ­¥

Promise æœ¬èº«æ˜¯åŒæ­¥çš„ï¼Œå®ƒä¸èƒ½å°†åŒæ­¥ä»£ç è½¬ä¸ºå¼‚æ­¥ä»£ç ï¼Œå®ƒçš„ä½œç”¨ä»…ä»…æ˜¯åŒ…è£…å¼‚æ­¥ä»£ç ï¼Œä»è€Œä½¿å¾—å¼‚æ­¥ä»£ç å˜å¾—æ›´æ˜“ç”¨ä¸”æ›´ä¼˜é›…è€Œå·²ã€‚

æ¯”å¦‚ä¸‹é¢çš„ Promise åŒæ ·ä¼šé˜»å¡ä»£ç è¿è¡Œï¼š

```js
// Promise ä¸èƒ½ä¹Ÿä¸ä¼šå°†åŒæ­¥ä»£ç è½¬æ¢ä¸ºå¼‚æ­¥ä»£ç 
new Promise(resolve => {
   // å‡è®¾æ­£åœ¨è¿è¡Œä¸€æ®µè€—æ—¶ä»£ç 
   const start = Date.now();

   while (Date.now() - start <= 2000) {
      // æ¨¡æ‹Ÿ2ç§’è€—æ—¶æ“ä½œ
   }

   resolve('2ç§’ Promise');
})
        .then(data => console.log(data));

// è¯¥ä»£ç ä¼šè¢«é˜»å¡2ç§’
console.log('åŒæ­¥ä»£ç ');

// åŒæ­¥ä»£ç 
// 2ç§’ Promise
```
